(()=>{var t={n:e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";function o(t,e){return o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},o(t,e)}function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e)}t.r(e);const r=flarum.core.compat["forum/components/IndexPage"];var a=t.n(r);const i=flarum.core.compat["common/helpers/icon"];var s=t.n(i);const c=flarum.core.compat["common/components/Page"];var p=t.n(c);const u=flarum.core.compat["common/components/LoadingIndicator"];var l=t.n(u);const d=flarum.core.compat["common/Component"];var f=t.n(d);const h=flarum.core.compat["common/utils/ItemList"];var g=t.n(h);const y=flarum.core.compat["common/helpers/listItems"];var v=t.n(y),b=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.view=function(){return m("header",{className:"Hero PageHero"},m("div",{className:"container"},m("ul",{className:"PageHero-items"},v()(this.items().toArray()))))},o.items=function(){var t=new(g()),e=this.attrs.page;return t.add("title",m("h2",{className:"PageHero-title"},m(Link,{href:app.route.page(e)},e.title()))),t},e}(f()),P=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.oninit=function(e){t.prototype.oninit.call(this,e),this.page=null,this.loadPage(),this.bodyClass="App--page"},o.view=function(){var t=this.page;return m("div",{className:"Pages"},m("div",{className:"Pages-page"},t?[this.hero(),m("div",{className:"Pages-container container"},m("div",{className:"Post-body"},this.content()))]:l().component({className:"LoadingIndicator--block"})))},o.show=function(t){this.page=t,app.history.push("page",t.title()),app.setTitle(t.title()),m.redraw()},o.hero=function(){return b.component({page:this.page})},o.content=function(){return m.trust(this.page.contentHtml())},o.id=function(){var t=m.route.param("id").split("-")[0];return isNaN(parseInt(t))?m.route.param("id"):t},o.loadPage=function(){var t=this,e=this.id(),o=app.preloadedApiDocument(),n=!Array.isArray(o)&&o||app.store.getById("pages",e);n?this.show(n):Promise.all([app.store.find("pages",e).then((function(e){t.show(e)})),m.redraw()])},e}(p()),w=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.oninit=function(e){t.prototype.oninit.call(this,e),app.history.push("homePage",s()("fas fa-home")),app.drawer.hide(),app.modal.close()},o.show=function(t){this.page=t,app.setTitle(""),m.redraw()},o.hero=function(){return a().prototype.hero()},o.id=function(){return app.data["fof-pages.home"]},e}(P);const H=flarum.core.compat.app;var N=t.n(H);const O=flarum.core.compat["common/Model"];var _=t.n(O);const I=flarum.core.compat["common/utils/computed"];var j=t.n(I);const A=flarum.core.compat["common/utils/string"],T=flarum.core.compat["common/components/Badge"];var S=t.n(T),L=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).title=_().attribute("title"),e.time=_().attribute("time",_().transformDate),e.editTime=_().attribute("editTime",_().transformDate),e.content=_().attribute("content"),e.contentHtml=_().attribute("contentHtml"),e.contentPlain=j()("contentHtml",A.getPlainContent),e.slug=_().attribute("slug"),e.isHidden=_().attribute("isHidden"),e.isRestricted=_().attribute("isRestricted"),e.isHtml=_().attribute("isHtml"),e}return n(e,t),e.prototype.badges=function(){var t=new(g());return this.isHidden()&&t.add("hidden",S().component({type:"hidden",icon:"fas fa-trash",label:N().translator.trans("fof-pages.admin.badges.hidden")})),this.isRestricted()&&t.add("restricted",S().component({type:"restricted",icon:"fas fa-user-shield",label:N().translator.trans("fof-pages.admin.badges.restricted")})),t},e}(_());app.initializers.add("fof-pages",(function(t){t.routes.homePage={path:"/pages/home",component:w},t.routes.page={path:"/p/:id",component:P},t.store.models.pages=L,t.route.page=function(e){return t.route("page",{id:e.id()+"-"+e.slug()})}}))})(),module.exports=e})();
//# sourceMappingURL=forum.js.map