(()=>{var t={n:e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};(()=>{"use strict";function e(t,o){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},e(t,o)}function o(t,o){t.prototype=Object.create(o.prototype),t.prototype.constructor=t,e(t,o)}const n=flarum.core.compat["forum/components/IndexPage"];var a=t.n(n);const r=flarum.core.compat["common/helpers/icon"];var i=t.n(r);const s=flarum.core.compat["common/components/Page"];var c=t.n(s);const p=flarum.core.compat["common/components/LoadingIndicator"];var u=t.n(p);const l=flarum.core.compat["common/utils/classList"];var d=t.n(l);const f=flarum.core.compat["common/app"];var h=t.n(f);const g=flarum.core.compat["common/Component"];var v=t.n(g);const y=flarum.core.compat["common/components/Link"];var b=t.n(y);const P=flarum.core.compat["common/utils/ItemList"];var H=t.n(P);const w=flarum.core.compat["common/helpers/listItems"];var N=t.n(w),O=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.view=function(){return m("header",{className:"Hero PageHero"},m("div",{className:"container"},m("ul",{className:"PageHero-items"},N()(this.items().toArray()))))},n.items=function(){var t=new(H()),e=this.attrs.page;return t.add("title",m("h1",{className:"PageHero-title"},m(b(),{href:h().route.page(e)},e.title()))),t},e}(v()),I=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),this.page=null,this.loadPage(),this.bodyClass="App--page"},n.view=function(){var t=this.page;return m("div",{className:d()("Pages",(null==t?void 0:t.isHtml())&&"Pages--isHtml"),"data-id":null==t?void 0:t.id(),"data-slug":null==t?void 0:t.slug()},m("div",{className:"Pages-page"},t?[this.hero(),m("div",{className:"Pages-container container"},m("div",{className:"Post-body"},this.content()))]:u().component({className:"LoadingIndicator--block"})))},n.show=function(t){this.page=t,app.history.push("page",t.title()),app.setTitle(t.title()),m.redraw()},n.hero=function(){return O.component({page:this.page})},n.content=function(){return m.trust(this.page.contentHtml())},n.id=function(){var t=m.route.param("id").split("-")[0];return isNaN(parseInt(t))?m.route.param("id"):t},n.loadPage=function(){var t=this,e=this.id(),o=app.preloadedApiDocument(),n=!Array.isArray(o)&&o||app.store.getById("pages",e);n?this.show(n):Promise.all([app.store.find("pages",e).then((function(e){t.show(e)})),m.redraw()])},e}(c()),A=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),app.history.push("homePage",i()("fas fa-home")),app.drawer.hide(),app.modal.close()},n.show=function(t){this.page=t,app.setTitle(""),m.redraw()},n.hero=function(){return a().prototype.hero()},n.id=function(){return app.data["fof-pages.home"]},e}(I);const _=flarum.core.compat.app;var j=t.n(_);const L=flarum.core.compat["common/Model"];var T=t.n(L);const C=flarum.core.compat["common/utils/computed"];var D=t.n(C);const R=flarum.core.compat["common/utils/string"],k=flarum.core.compat["common/components/Badge"];var x=t.n(k),B=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).title=T().attribute("title"),e.time=T().attribute("time",T().transformDate),e.editTime=T().attribute("editTime",T().transformDate),e.content=T().attribute("content"),e.contentHtml=T().attribute("contentHtml"),e.contentPlain=D()("contentHtml",R.getPlainContent),e.slug=T().attribute("slug"),e.isHidden=T().attribute("isHidden"),e.isRestricted=T().attribute("isRestricted"),e.isHtml=T().attribute("isHtml"),e}return o(e,t),e.prototype.badges=function(){var t=new(H());return this.isHidden()&&t.add("hidden",x().component({type:"hidden",icon:"fas fa-trash",label:j().translator.trans("fof-pages.admin.badges.hidden")})),this.isRestricted()&&t.add("restricted",x().component({type:"restricted",icon:"fas fa-user-shield",label:j().translator.trans("fof-pages.admin.badges.restricted")})),t},e}(T());app.initializers.add("fof-pages",(function(t){t.routes.homePage={path:"/pages/home",component:A},t.routes.page={path:"/p/:id",component:I},t.store.models.pages=B,t.route.page=function(e){return t.route("page",{id:e.id()+"-"+e.slug()})}}))})(),module.exports={}})();
//# sourceMappingURL=forum.js.map