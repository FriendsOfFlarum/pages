(()=>{var t={n:e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e)}t.r(e);const a=flarum.core.compat["forum/components/IndexPage"];var r=t.n(a);const i=flarum.core.compat["common/helpers/icon"];var s=t.n(i);const c=flarum.core.compat["common/components/Page"];var p=t.n(c);const u=flarum.core.compat["common/components/LoadingIndicator"];var l=t.n(u);const d=flarum.core.compat["common/utils/classList"];var f=t.n(d);const h=flarum.core.compat["common/app"];var g=t.n(h);const v=flarum.core.compat["common/Component"];var y=t.n(v);const b=flarum.core.compat["common/components/Link"];var P=t.n(b);const H=flarum.core.compat["common/utils/ItemList"];var w=t.n(H);const N=flarum.core.compat["common/helpers/listItems"];var O=t.n(N),_=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.view=function(){return m("header",{className:"Hero PageHero"},m("div",{className:"container"},m("ul",{className:"PageHero-items"},O()(this.items().toArray()))))},o.items=function(){var t=new(w()),e=this.attrs.page;return t.add("title",m("h1",{className:"PageHero-title"},m(P(),{href:g().route.page(e)},e.title()))),t},e}(y()),j=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.oninit=function(e){t.prototype.oninit.call(this,e),this.page=null,this.loadPage(),this.bodyClass="App--page"},o.view=function(){var t=this.page;return m("div",{className:f()("Pages",(null==t?void 0:t.isHtml())&&"Pages--isHtml"),"data-id":null==t?void 0:t.id(),"data-slug":null==t?void 0:t.slug()},m("div",{className:"Pages-page"},t?[this.hero(),m("div",{className:"Pages-container container"},m("div",{className:"Post-body"},this.content()))]:l().component({className:"LoadingIndicator--block"})))},o.show=function(t){this.page=t,app.history.push("page",t.title()),app.setTitle(t.title()),m.redraw()},o.hero=function(){return _.component({page:this.page})},o.content=function(){return m.trust(this.page.contentHtml())},o.id=function(){var t=m.route.param("id").split("-")[0];return isNaN(parseInt(t))?m.route.param("id"):t},o.loadPage=function(){var t=this,e=this.id(),o=app.preloadedApiDocument(),n=!Array.isArray(o)&&o||app.store.getById("pages",e);n?this.show(n):Promise.all([app.store.find("pages",e).then((function(e){t.show(e)})),m.redraw()])},e}(p()),I=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.oninit=function(e){t.prototype.oninit.call(this,e),app.history.push("homePage",s()("fas fa-home")),app.drawer.hide(),app.modal.close()},o.show=function(t){this.page=t,app.setTitle(""),m.redraw()},o.hero=function(){return r().prototype.hero()},o.id=function(){return app.data["fof-pages.home"]},e}(j);const A=flarum.core.compat.app;var T=t.n(A);const L=flarum.core.compat["common/Model"];var S=t.n(L);const M=flarum.core.compat["common/utils/computed"];var C=t.n(M);const D=flarum.core.compat["common/utils/string"],R=flarum.core.compat["common/components/Badge"];var k=t.n(R),x=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).title=S().attribute("title"),e.time=S().attribute("time",S().transformDate),e.editTime=S().attribute("editTime",S().transformDate),e.content=S().attribute("content"),e.contentHtml=S().attribute("contentHtml"),e.contentPlain=C()("contentHtml",D.getPlainContent),e.slug=S().attribute("slug"),e.isHidden=S().attribute("isHidden"),e.isRestricted=S().attribute("isRestricted"),e.isHtml=S().attribute("isHtml"),e}return n(e,t),e.prototype.badges=function(){var t=new(w());return this.isHidden()&&t.add("hidden",k().component({type:"hidden",icon:"fas fa-trash",label:T().translator.trans("fof-pages.admin.badges.hidden")})),this.isRestricted()&&t.add("restricted",k().component({type:"restricted",icon:"fas fa-user-shield",label:T().translator.trans("fof-pages.admin.badges.restricted")})),t},e}(S());app.initializers.add("fof-pages",(function(t){t.routes.homePage={path:"/pages/home",component:I},t.routes.page={path:"/p/:id",component:j},t.store.models.pages=x,t.route.page=function(e){return t.route("page",{id:e.id()+"-"+e.slug()})}}))})(),module.exports=e})();
//# sourceMappingURL=forum.js.map