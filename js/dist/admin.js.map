{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@fof/pages/webpack/bootstrap","webpack://@fof/pages/webpack/runtime/compat get default export","webpack://@fof/pages/webpack/runtime/define property getters","webpack://@fof/pages/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/pages/webpack/runtime/make namespace object","webpack://@fof/pages/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/pages/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/pages/external root \"flarum.core.compat['app']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/utils/computed']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/utils/string']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/components/Badge']\"","webpack://@fof/pages/./src/common/models/Page.js","webpack://@fof/pages/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/utils/withAttr']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/utils/setRouteWithForcedRefresh']\"","webpack://@fof/pages/./src/admin/components/EditPageModal.js","webpack://@fof/pages/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/components/Placeholder']\"","webpack://@fof/pages/external root \"flarum.core.compat['admin/utils/saveSettings']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@fof/pages/./src/admin/components/PagesListItem.js","webpack://@fof/pages/./src/admin/components/PagesList.js","webpack://@fof/pages/./src/admin/components/PagesPage.js","webpack://@fof/pages/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/pages/external root \"flarum.core.compat['admin/components/BasicsPage']\"","webpack://@fof/pages/./src/admin/index.js","webpack://@fof/pages/./src/admin/addPageHomePageOption.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/computed'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/string'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Badge'];","import app from 'flarum/app';\r\nimport Model from 'flarum/common/Model';\r\nimport computed from 'flarum/common/utils/computed';\r\nimport { getPlainContent } from 'flarum/common/utils/string';\r\nimport ItemList from 'flarum/common/utils/ItemList';\r\nimport Badge from 'flarum/common/components/Badge';\r\n\r\nexport default class Page extends Model {\r\n    title = Model.attribute('title');\r\n    time = Model.attribute('time', Model.transformDate);\r\n    editTime = Model.attribute('editTime', Model.transformDate);\r\n    content = Model.attribute('content');\r\n    contentHtml = Model.attribute('contentHtml');\r\n    contentPlain = computed('contentHtml', getPlainContent);\r\n    slug = Model.attribute('slug');\r\n    isHidden = Model.attribute('isHidden');\r\n    isRestricted = Model.attribute('isRestricted');\r\n    isHtml = Model.attribute('isHtml');\r\n\r\n    badges() {\r\n        const items = new ItemList();\r\n\r\n        if (this.isHidden()) {\r\n            items.add(\r\n                'hidden',\r\n                Badge.component({\r\n                    type: 'hidden',\r\n                    icon: 'fas fa-trash',\r\n                    label: app.translator.trans('fof-pages.admin.badges.hidden'),\r\n                })\r\n            );\r\n        }\r\n\r\n        if (this.isRestricted()) {\r\n            items.add(\r\n                'restricted',\r\n                Badge.component({\r\n                    type: 'restricted',\r\n                    icon: 'fas fa-user-shield',\r\n                    label: app.translator.trans('fof-pages.admin.badges.restricted'),\r\n                })\r\n            );\r\n        }\r\n\r\n        return items;\r\n    }\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/withAttr'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/setRouteWithForcedRefresh'];","import Modal from 'flarum/common/components/Modal';\r\nimport Button from 'flarum/common/components/Button';\r\nimport { slug } from 'flarum/common/utils/string';\r\nimport Stream from 'flarum/common/utils/Stream';\r\nimport withAttr from 'flarum/common/utils/withAttr';\r\nimport setRouteWithForcedRefresh from 'flarum/common/utils/setRouteWithForcedRefresh';\r\n\r\n/**\r\n * The `EditPageModal` component shows a modal dialog which allows the user\r\n * to create or edit a page.\r\n */\r\nexport default class EditPageModal extends Modal {\r\n    oninit(vnode) {\r\n        super.oninit(vnode);\r\n\r\n        this.page = this.attrs.page || app.store.createRecord('pages');\r\n\r\n        this.pageTitle = Stream(this.page.title() || '');\r\n        this.slug = Stream(this.page.slug() || '');\r\n        this.pageContent = Stream(this.page.content() || '');\r\n        this.isHidden = Stream(this.page.isHidden());\r\n        this.isRestricted = Stream(this.page.isRestricted());\r\n        this.isHtml = Stream(this.page.isHtml());\r\n    }\r\n\r\n    className() {\r\n        return 'EditPageModal Modal--large';\r\n    }\r\n\r\n    title() {\r\n        const title = this.pageTitle();\r\n        return title ? title : app.translator.trans('fof-pages.admin.edit_page.title');\r\n    }\r\n\r\n    content() {\r\n        return (\r\n            <div className=\"Modal-body\">\r\n                <div className=\"Form\">\r\n                    <div className=\"Form-group\">\r\n                        <label>{app.translator.trans('fof-pages.admin.edit_page.title_label')}</label>\r\n                        <input\r\n                            className=\"FormControl\"\r\n                            placeholder={app.translator.trans('fof-pages.admin.edit_page.title_placeholder')}\r\n                            value={this.pageTitle()}\r\n                            oninput={(e) => {\r\n                                this.pageTitle(e.target.value);\r\n                                this.slug(slug(e.target.value));\r\n                            }}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"Form-group\">\r\n                        <label>{app.translator.trans('fof-pages.admin.edit_page.slug_label')}</label>\r\n                        <input\r\n                            className=\"FormControl\"\r\n                            placeholder={app.translator.trans('fof-pages.admin.edit_page.slug_placeholder')}\r\n                            value={this.slug()}\r\n                            oninput={(e) => {\r\n                                this.slug(e.target.value);\r\n                            }}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"Form-group\">\r\n                        <label>{app.translator.trans('fof-pages.admin.edit_page.content_label')}</label>\r\n                        <textarea\r\n                            className=\"FormControl\"\r\n                            rows=\"5\"\r\n                            value={this.pageContent()}\r\n                            onchange={withAttr('value', this.pageContent)}\r\n                            placeholder={app.translator.trans('fof-pages.admin.edit_page.content_placeholder')}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"Form-group\">\r\n                        <div>\r\n                            <label className=\"checkbox\">\r\n                                <input type=\"checkbox\" checked={this.isHidden()} onchange={withAttr('checked', this.isHidden)} />\r\n                                {app.translator.trans('fof-pages.admin.edit_page.hidden_label')}\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"Form-group\">\r\n                        <div>\r\n                            <label className=\"checkbox\">\r\n                                <input type=\"checkbox\" checked={this.isRestricted()} onchange={withAttr('checked', this.isRestricted)} />\r\n                                {app.translator.trans('fof-pages.admin.edit_page.restricted_label')}\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"Form-group\">\r\n                        <div>\r\n                            <label className=\"checkbox\">\r\n                                <input type=\"checkbox\" checked={this.isHtml()} onchange={withAttr('checked', this.isHtml)} />\r\n                                {app.translator.trans('fof-pages.admin.edit_page.html_label')}\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"Form-group\">\r\n                        {Button.component(\r\n                            {\r\n                                type: 'submit',\r\n                                className: 'Button Button--primary EditPageModal-save',\r\n                                loading: this.loading,\r\n                            },\r\n                            app.translator.trans('fof-pages.admin.edit_page.submit_button')\r\n                        )}\r\n                        {this.page.exists ? (\r\n                            <button type=\"button\" className=\"Button EditPageModal-delete\" onclick={this.delete.bind(this)}>\r\n                                {app.translator.trans('fof-pages.admin.edit_page.delete_page_button')}\r\n                            </button>\r\n                        ) : (\r\n                            ''\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    onsubmit(e) {\r\n        e.preventDefault();\r\n\r\n        this.loading = true;\r\n\r\n        this.page\r\n            .save(\r\n                {\r\n                    title: this.pageTitle(),\r\n                    slug: this.slug(),\r\n                    content: this.pageContent(),\r\n                    isHidden: this.isHidden(),\r\n                    isRestricted: this.isRestricted(),\r\n                    isHtml: this.isHtml(),\r\n                },\r\n                { errorHandler: this.onerror.bind(this) }\r\n            )\r\n            .then(this.hideAndRefresh.bind(this))\r\n            .catch(() => {\r\n                this.loading = false;\r\n                m.redraw();\r\n            });\r\n    }\r\n\r\n    hideAndRefresh() {\r\n        this.hide();\r\n        setRouteWithForcedRefresh(app.route('extension', { id: 'fof-pages' }));\r\n    }\r\n\r\n    delete() {\r\n        this.loading = true;\r\n\r\n        if (confirm(app.translator.trans('fof-pages.admin.edit_page.delete_page_confirmation'))) {\r\n            this.page\r\n                .delete()\r\n                .then(this.hideAndRefresh.bind(this))\r\n                .catch(() => {\r\n                    this.loading = false;\r\n                    m.redraw();\r\n                });\r\n        }\r\n    }\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Placeholder'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/utils/saveSettings'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","import Button from 'flarum/common/components/Button';\r\nimport Component from 'flarum/common/Component';\r\nimport saveSettings from 'flarum/admin/utils/saveSettings';\r\nimport listItems from 'flarum/common/helpers/listItems';\r\nimport setRouteWithForcedRefresh from 'flarum/common/utils/setRouteWithForcedRefresh';\r\n\r\nimport EditPageModal from './EditPageModal';\r\n\r\n/**\r\n * ### Props\r\n *\r\n * - `page`\r\n */\r\nexport default class PagesListItem extends Component {\r\n    view() {\r\n        const page = this.attrs.page;\r\n        const url = app.forum.attribute('baseUrl') + '/p/' + page.id() + '-' + page.slug();\r\n        const badges = page.badges().toArray();\r\n        return (\r\n            <tr key={page.id()}>\r\n                <th>\r\n                    {page.title()}\r\n                    {badges.length ? <ul className=\"badges\">{listItems(page.badges().toArray())}</ul> : null}\r\n                </th>\r\n                <td className=\"Pages-actions\">\r\n                    <div className=\"ButtonGroup\">\r\n                        {Button.component({\r\n                            className: 'Button Button--page-edit',\r\n                            icon: 'fas fa-pencil-alt',\r\n                            onclick: () => app.modal.show(EditPageModal, { page }),\r\n                        })}\r\n                        {Button.component({\r\n                            className: 'Button Button--page-edit',\r\n                            icon: 'fas fa-home',\r\n                            onclick: this.setAsHomePage.bind(this),\r\n                            disabled: app.data.settings['pages_home'] === page.id() && app.data.settings['default_route'] === '/pages/home',\r\n                        })}\r\n                        {Button.component({\r\n                            className: 'Button Button--page-view',\r\n                            icon: 'fas fa-eye fa-sm',\r\n                            onclick: () => window.open(url, '_blank'),\r\n                        })}\r\n                        {Button.component({\r\n                            className: 'Button Button--danger Button--page-delete',\r\n                            icon: 'fas fa-times',\r\n                            onclick: this.delete.bind(this),\r\n                        })}\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n        );\r\n    }\r\n\r\n    setAsHomePage() {\r\n        app.alerts.dismiss(this.successAlert);\r\n        if (confirm(app.translator.trans('fof-pages.admin.edit_page.set_as_home_page_confirmation'))) {\r\n            const page = this.attrs.page;\r\n            saveSettings({\r\n                default_route: '/pages/home',\r\n                pages_home: page.id(),\r\n            })\r\n                .then(() => {\r\n                    app.alerts.show({ type: 'success' }, app.translator.trans('fof-pages.admin.edit_page.set_as_home_page_done'));\r\n                })\r\n                .catch(() => {})\r\n                .then(() => {\r\n                    this.loading = false;\r\n                    m.redraw();\r\n                });\r\n        }\r\n    }\r\n\r\n    delete() {\r\n        if (confirm(app.translator.trans('fof-pages.admin.edit_page.delete_page_confirmation'))) {\r\n            const page = this.attrs.page;\r\n            page.delete().then(() => {\r\n                setRouteWithForcedRefresh(app.route('extension', { id: 'fof-pages' }));\r\n            });\r\n        }\r\n    }\r\n}\r\n","import Component from 'flarum/common/Component';\r\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\r\nimport Placeholder from 'flarum/common/components/Placeholder';\r\nimport Button from 'flarum/common/components/Button';\r\n\r\nimport PagesListItem from './PagesListItem';\r\n\r\n/**\r\n * The `PagesList` component displays a list of Pages.\r\n *\r\n */\r\nexport default class PagesList extends Component {\r\n    oninit(vnode) {\r\n        super.oninit(vnode);\r\n        /**\r\n         * Whether or not pages results are loading.\r\n         *\r\n         * @type {Boolean}\r\n         */\r\n        this.loading = true;\r\n\r\n        /**\r\n         * The pages in the pages list.\r\n         *\r\n         * @type {Page}\r\n         */\r\n        this.pages = [];\r\n\r\n        /**\r\n         * Current page number.\r\n         *\r\n         * @type {Integer}\r\n         */\r\n        this.page = 0;\r\n\r\n        /**\r\n         * The number of activity items to load per request.\r\n         *\r\n         * @type {Integer}\r\n         */\r\n        this.loadLimit = 20;\r\n\r\n        this.refresh();\r\n    }\r\n\r\n    view() {\r\n        if (this.loading) {\r\n            return <div className=\"PageList-loading\">{LoadingIndicator.component()}</div>;\r\n        }\r\n\r\n        if (this.pages.length === 0) {\r\n            const text = app.translator.trans('fof-pages.admin.pages_list.empty_text');\r\n            return Placeholder.component({ text });\r\n        }\r\n\r\n        let next, prev;\r\n\r\n        if (this.nextResults === true) {\r\n            next = Button.component({\r\n                className: 'Button Button--PageList-next',\r\n                icon: 'fas fa-angle-right',\r\n                onclick: this.loadNext.bind(this),\r\n            });\r\n        }\r\n\r\n        if (this.prevResults === true) {\r\n            prev = Button.component({\r\n                className: 'Button Button--PageList-prev',\r\n                icon: 'fas fa-angle-left',\r\n                onclick: this.loadPrev.bind(this),\r\n            });\r\n        }\r\n\r\n        return (\r\n            <div className=\"PageList\">\r\n                <table className=\"PageList-results\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>{app.translator.trans('fof-pages.admin.pages_list.title')}</th>\r\n                            <th />\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {this.pages.map((page) => {\r\n                            return PagesListItem.component({ page });\r\n                        })}\r\n                    </tbody>\r\n                </table>\r\n                <div className=\"PageList-pagination\">\r\n                    {next}\r\n                    {prev}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * @public\r\n     */\r\n    refresh(clear = true) {\r\n        if (clear) {\r\n            this.loading = true;\r\n            this.pages = [];\r\n        }\r\n\r\n        return this.loadResults().then(this.parseResults.bind(this));\r\n    }\r\n\r\n    /**\r\n     * Load a new page of Pages results.\r\n     *\r\n     * @param {Integer} page number.\r\n     * @return {Promise}\r\n     */\r\n    loadResults() {\r\n        const offset = this.page * this.loadLimit;\r\n        return app.store.find('pages', {\r\n            page: { offset, limit: this.loadLimit },\r\n            sort: '-time',\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Load the next page of results.\r\n     *\r\n     * @public\r\n     */\r\n    loadNext() {\r\n        if (this.nextResults === true) {\r\n            this.page++;\r\n            this.refresh();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Load the previous page of results.\r\n     *\r\n     * @public\r\n     */\r\n    loadPrev() {\r\n        if (this.prevResults === true) {\r\n            this.page--;\r\n            this.refresh();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Parse results and append them to the page list.\r\n     *\r\n     * @param {Page[]} results\r\n     * @return {Page[]}\r\n     */\r\n    parseResults(results) {\r\n        [].push.apply(this.pages, results);\r\n\r\n        this.loading = false;\r\n\r\n        this.nextResults = !!results.payload.links.next;\r\n        this.prevResults = !!results.payload.links.prev;\r\n\r\n        m.redraw();\r\n        return results;\r\n    }\r\n}\r\n","import ExtensionPage from 'flarum/admin/components/ExtensionPage';\r\nimport Button from 'flarum/common/components/Button';\r\n\r\nimport EditPageModal from './EditPageModal';\r\nimport PagesList from './PagesList';\r\n\r\nexport default class PagesPage extends ExtensionPage {\r\n    content() {\r\n        return (\r\n            <div className=\"PagesPage\">\r\n                <div className=\"PagesPage-header\">\r\n                    <div className=\"container\">\r\n                        {Button.component(\r\n                            {\r\n                                className: 'Button Button--primary',\r\n                                icon: 'fas fa-plus',\r\n                                onclick: () => app.modal.show(EditPageModal),\r\n                            },\r\n                            app.translator.trans('fof-pages.admin.pages.create_button')\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                <div className=\"PagesPage-list\">\r\n                    <div className=\"container\">{PagesList.component()}</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/BasicsPage'];","import Page from '../common/models/Page';\r\nimport PagesPage from './components/PagesPage';\r\nimport addPageHomePageOption from './addPageHomePageOption';\r\n\r\napp.initializers.add('fof-pages', (app) => {\r\n    app.store.models.pages = Page;\r\n\r\n    app.extensionData\r\n        .for('fof-pages')\r\n        .registerPage(PagesPage)\r\n        .registerPermission(\r\n            {\r\n                icon: 'fas fa-file-alt',\r\n                label: app.translator.trans('fof-pages.admin.permissions.restricted'),\r\n                permission: 'fof-pages.viewRestricted',\r\n            },\r\n            'view'\r\n        );\r\n\r\n    addPageHomePageOption();\r\n});\r\n","import { extend } from 'flarum/common/extend';\r\nimport BasicsPage from 'flarum/admin/components/BasicsPage';\r\n\r\nexport default function () {\r\n    extend(BasicsPage.prototype, 'homePageItems', (items) => {\r\n        items.add('fof-pages', {\r\n            path: '/pages/home',\r\n            label: 'FriendsOfFlarum Pages',\r\n        });\r\n    });\r\n}\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","_setPrototypeOf","p","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","create","constructor","flarum","core","compat","Page","title","Model","time","editTime","content","contentHtml","contentPlain","computed","getPlainContent","slug","isHidden","isRestricted","isHtml","badges","items","ItemList","this","add","Badge","type","icon","label","app","EditPageModal","oninit","vnode","page","attrs","store","createRecord","pageTitle","Stream","pageContent","className","translator","trans","placeholder","oninput","e","target","rows","onchange","withAttr","checked","Button","loading","exists","onclick","bind","onsubmit","preventDefault","save","errorHandler","onerror","then","hideAndRefresh","m","redraw","hide","setRouteWithForcedRefresh","route","id","confirm","Modal","PagesListItem","view","url","forum","attribute","toArray","length","listItems","modal","show","setAsHomePage","disabled","data","settings","window","open","alerts","dismiss","successAlert","saveSettings","default_route","pages_home","Component","PagesList","pages","loadLimit","refresh","LoadingIndicator","text","Placeholder","next","prev","nextResults","loadNext","prevResults","loadPrev","map","component","clear","loadResults","parseResults","offset","find","limit","sort","results","push","apply","payload","links","PagesPage","ExtensionPage","initializers","models","extensionData","registerPage","registerPermission","permission","extend","BasicsPage","path"],"sourceRoot":""}