{"version":3,"file":"admin.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,IACzBH,GCLRF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,MCJ3ER,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFf,EAAyBM,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,M,wBCLxC,SAASC,EAAgBb,EAAGc,GAMzC,OALAD,EAAkBZ,OAAOc,gBAAkB,SAAyBf,EAAGc,GAErE,OADAd,EAAEgB,UAAYF,EACPd,GAGFa,EAAgBb,EAAGc,GCLb,SAASG,EAAeC,EAAUC,GAC/CD,EAASX,UAAYN,OAAOmB,OAAOD,EAAWZ,WAC9CW,EAASX,UAAUc,YAAcH,EACjCH,EAAeG,EAAUC,G,OCJ3B,MAAM,EAA+BG,OAAOC,KAAKC,OAAY,I,aCA7D,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,gB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,yB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,uBCAlD,EAA+BF,OAAOC,KAAKC,OAAO,yB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,2B,aCOnCC,EAAAA,SAAAA,G,wIACnBC,MAAQC,IAAAA,UAAgB,S,EACxBC,KAAOD,IAAAA,UAAgB,OAAQA,IAAAA,e,EAC/BE,SAAWF,IAAAA,UAAgB,WAAYA,IAAAA,e,EACvCG,QAAUH,IAAAA,UAAgB,W,EAC1BI,YAAcJ,IAAAA,UAAgB,e,EAC9BK,aAAeC,GAAAA,CAAS,cAAeC,EAAAA,iB,EACvCC,KAAOR,IAAAA,UAAgB,Q,EACvBS,SAAWT,IAAAA,UAAgB,Y,EAC3BU,aAAeV,IAAAA,UAAgB,gB,EAC/BW,OAASX,IAAAA,UAAgB,U,4BAEzBY,OAAA,WACE,IAAMC,EAAQ,IAAIC,KAwBlB,OAtBIC,KAAKN,YACPI,EAAMG,IACJ,SACAC,IAAAA,UAAgB,CACdC,KAAM,SACNC,KAAM,eACNC,MAAOC,IAAAA,WAAAA,MAAqB,oCAK9BN,KAAKL,gBACPG,EAAMG,IACJ,aACAC,IAAAA,UAAgB,CACdC,KAAM,aACNC,KAAM,qBACNC,MAAOC,IAAAA,WAAAA,MAAqB,wCAK3BR,G,EArCUf,CAAaE,KCPlC,MAAM,EAA+BL,OAAOC,KAAKC,OAAO,kC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,2B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,uB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,yB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,0C,aCWnCyB,EAAAA,SAAAA,G,oFACnBC,OAAA,SAAOC,GACL,YAAMD,OAAN,UAAaC,GAEbT,KAAKU,KAAOV,KAAKW,MAAMD,MAAQJ,IAAIM,MAAMC,aAAa,SAEtDb,KAAKc,UAAYC,GAAAA,CAAOf,KAAKU,KAAK1B,SAAW,IAC7CgB,KAAKP,KAAOsB,GAAAA,CAAOf,KAAKU,KAAKjB,QAAU,IACvCO,KAAKgB,YAAcD,GAAAA,CAAOf,KAAKU,KAAKtB,WAAa,IACjDY,KAAKN,SAAWqB,GAAAA,CAAOf,KAAKU,KAAKhB,YACjCM,KAAKL,aAAeoB,GAAAA,CAAOf,KAAKU,KAAKf,gBACrCK,KAAKJ,OAASmB,GAAAA,CAAOf,KAAKU,KAAKd,W,EAGjCqB,UAAA,WACE,MAAO,8B,EAGTjC,MAAA,WAEE,OADcgB,KAAKc,aACIR,IAAIY,WAAWC,MAAM,oC,EAG9C/B,QAAA,WAAU,WACR,OACE,SAAK6B,UAAU,cACb,SAAKA,UAAU,QACb,SAAKA,UAAU,cACb,eAAQX,IAAIY,WAAWC,MAAM,0CAC7B,WACEF,UAAU,cACVG,YAAad,IAAIY,WAAWC,MAAM,+CAClCjD,MAAO8B,KAAKc,YACZO,QAAS,SAACC,GACR,EAAKR,UAAUQ,EAAEC,OAAOrD,OACxB,EAAKuB,MAAKA,EAAAA,EAAAA,MAAK6B,EAAEC,OAAOrD,YAK9B,SAAK+C,UAAU,cACb,eAAQX,IAAIY,WAAWC,MAAM,yCAC7B,WACEF,UAAU,cACVG,YAAad,IAAIY,WAAWC,MAAM,8CAClCjD,MAAO8B,KAAKP,OACZ4B,QAAS,SAACC,GACR,EAAK7B,KAAK6B,EAAEC,OAAOrD,WAKzB,SAAK+C,UAAU,cACb,eAAQX,IAAIY,WAAWC,MAAM,4CAC7B,cACEF,UAAU,cACVO,KAAK,IACLtD,MAAO8B,KAAKgB,cACZS,SAAUC,GAAAA,CAAS,QAAS1B,KAAKgB,aACjCI,YAAad,IAAIY,WAAWC,MAAM,oDAItC,SAAKF,UAAU,cACb,aACE,WAAOA,UAAU,YACf,WAAOd,KAAK,WAAWwB,QAAS3B,KAAKN,WAAY+B,SAAUC,GAAAA,CAAS,UAAW1B,KAAKN,YACnFY,IAAIY,WAAWC,MAAM,6CAK5B,SAAKF,UAAU,cACb,aACE,WAAOA,UAAU,YACf,WAAOd,KAAK,WAAWwB,QAAS3B,KAAKL,eAAgB8B,SAAUC,GAAAA,CAAS,UAAW1B,KAAKL,gBACvFW,IAAIY,WAAWC,MAAM,iDAK5B,SAAKF,UAAU,cACb,aACE,WAAOA,UAAU,YACf,WAAOd,KAAK,WAAWwB,QAAS3B,KAAKJ,SAAU6B,SAAUC,GAAAA,CAAS,UAAW1B,KAAKJ,UACjFU,IAAIY,WAAWC,MAAM,2CAK5B,SAAKF,UAAU,cACZW,IAAAA,UACC,CACEzB,KAAM,SACNc,UAAW,4CACXY,QAAS7B,KAAK6B,SAEhBvB,IAAIY,WAAWC,MAAM,4CAEtBnB,KAAKU,KAAKoB,OACT,YAAQ3B,KAAK,SAASc,UAAU,8BAA8Bc,QAAS/B,KAAA,OAAYgC,KAAKhC,OACrFM,IAAIY,WAAWC,MAAM,iDAGxB,O,EAQZc,SAAA,SAASX,GAAG,WACVA,EAAEY,iBAEFlC,KAAK6B,SAAU,EAEf7B,KAAKU,KACFyB,KACC,CACEnD,MAAOgB,KAAKc,YACZrB,KAAMO,KAAKP,OACXL,QAASY,KAAKgB,cACdtB,SAAUM,KAAKN,WACfC,aAAcK,KAAKL,eACnBC,OAAQI,KAAKJ,UAEf,CAAEwC,aAAcpC,KAAKqC,QAAQL,KAAKhC,QAEnCsC,KAAKtC,KAAKuC,eAAeP,KAAKhC,OAZjC,OAaS,WACL,EAAK6B,SAAU,EACfW,EAAEC,a,EAIRF,eAAA,WACEvC,KAAK0C,OACLC,GAAAA,CAA0BrC,IAAIsC,MAAM,YAAa,CAAEC,GAAI,gB,SAGzD,WAAS,WACP7C,KAAK6B,SAAU,EAEXiB,QAAQxC,IAAIY,WAAWC,MAAM,wDAC/BnB,KAAKU,KAAL,SAEG4B,KAAKtC,KAAKuC,eAAeP,KAAKhC,OAFjC,OAGS,WACL,EAAK6B,SAAU,EACfW,EAAEC,a,EAtJSlC,CAAsBwC,KCX3C,MAAM,EAA+BnE,OAAOC,KAAKC,OAAO,oB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,sC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,iC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCanCkE,EAAAA,SAAAA,G,oFACnBC,KAAA,WACE,IAAMvC,EAAOV,KAAKW,MAAMD,KAClBwC,EAAM5C,IAAI6C,MAAMC,UAAU,WAAa,MAAQ1C,EAAKmC,KAAO,IAAMnC,EAAKjB,OACtEI,EAASa,EAAKb,SAASwD,UAC7B,OACE,QAAIhG,IAAKqD,EAAKmC,MACZ,YACGnC,EAAK1B,QACLa,EAAOyD,OAAS,QAAIrC,UAAU,UAAUsC,GAAAA,CAAU7C,EAAKb,SAASwD,YAAmB,MAEtF,QAAIpC,UAAU,iBACZ,SAAKA,UAAU,eACZW,IAAAA,UAAiB,CAChBX,UAAW,2BACXb,KAAM,oBACN2B,QAAS,kBAAMzB,IAAIkD,MAAMC,KAAKlD,EAAe,CAAEG,KAAAA,OAEhDkB,IAAAA,UAAiB,CAChBX,UAAW,2BACXb,KAAM,cACN2B,QAAS/B,KAAK0D,cAAc1B,KAAKhC,MACjC2D,SAAUrD,IAAIsD,KAAKC,SAAT,aAAoCnD,EAAKmC,MAA+C,gBAAvCvC,IAAIsD,KAAKC,SAAT,gBAE5DjC,IAAAA,UAAiB,CAChBX,UAAW,2BACXb,KAAM,mBACN2B,QAAS,kBAAM+B,OAAOC,KAAKb,EAAK,aAEjCtB,IAAAA,UAAiB,CAChBX,UAAW,4CACXb,KAAM,eACN2B,QAAS/B,KAAA,OAAYgC,KAAKhC,Y,EAQtC0D,cAAA,WAAgB,WAEd,GADApD,IAAI0D,OAAOC,QAAQjE,KAAKkE,cACpBpB,QAAQxC,IAAIY,WAAWC,MAAM,4DAA6D,CAC5F,IAAMT,EAAOV,KAAKW,MAAMD,KACxByD,GAAAA,CAAa,CACXC,cAAe,cACfC,WAAY3D,EAAKmC,OAEhBP,MAAK,WACJhC,IAAI0D,OAAOP,KAAK,CAAEtD,KAAM,WAAaG,IAAIY,WAAWC,MAAM,uDAL9D,OAOS,eACNmB,MAAK,WACJ,EAAKT,SAAU,EACfW,EAAEC,c,SAKV,WACMK,QAAQxC,IAAIY,WAAWC,MAAM,wDAClBnB,KAAKW,MAAMD,KACpB,SAAU4B,MAAK,WACjBK,GAAAA,CAA0BrC,IAAIsC,MAAM,YAAa,CAAEC,GAAI,mB,EA/D1CG,CAAsBsB,KCFtBC,EAAAA,SAAAA,G,oFACnB/D,OAAA,SAAOC,GACL,YAAMD,OAAN,UAAaC,GAMbT,KAAK6B,SAAU,EAOf7B,KAAKwE,MAAQ,GAObxE,KAAKU,KAAO,EAOZV,KAAKyE,UAAY,GAEjBzE,KAAK0E,W,EAGPzB,KAAA,WACE,GAAIjD,KAAK6B,QACP,OAAO,SAAKZ,UAAU,oBAAoB0D,IAAAA,aAG5C,GAA0B,IAAtB3E,KAAKwE,MAAMlB,OAAc,CAC3B,IAAMsB,EAAOtE,IAAIY,WAAWC,MAAM,yCAClC,OAAO0D,IAAAA,UAAsB,CAAED,KAAAA,IAGjC,IAAIE,EAAMC,EAkBV,OAhByB,IAArB/E,KAAKgF,cACPF,EAAOlD,IAAAA,UAAiB,CACtBX,UAAW,+BACXb,KAAM,qBACN2B,QAAS/B,KAAKiF,SAASjD,KAAKhC,UAIP,IAArBA,KAAKkF,cACPH,EAAOnD,IAAAA,UAAiB,CACtBX,UAAW,+BACXb,KAAM,oBACN2B,QAAS/B,KAAKmF,SAASnD,KAAKhC,SAK9B,SAAKiB,UAAU,YACb,WAAOA,UAAU,oBACf,eACE,YACE,YAAKX,IAAIY,WAAWC,MAAM,qCAC1B,eAGJ,eACGnB,KAAKwE,MAAMY,KAAI,SAAC1E,GACf,OAAOsC,EAAcqC,UAAU,CAAE3E,KAAAA,SAIvC,SAAKO,UAAU,uBACZ6D,EACAC,K,EASTL,QAAA,SAAQY,GAMN,YANoB,IAAdA,IAAAA,GAAQ,GACVA,IACFtF,KAAK6B,SAAU,EACf7B,KAAKwE,MAAQ,IAGRxE,KAAKuF,cAAcjD,KAAKtC,KAAKwF,aAAaxD,KAAKhC,Q,EASxDuF,YAAA,WACE,IAAME,EAASzF,KAAKU,KAAOV,KAAKyE,UAChC,OAAOnE,IAAIM,MAAM8E,KAAK,QAAS,CAC7BhF,KAAM,CAAE+E,OAAAA,EAAQE,MAAO3F,KAAKyE,WAC5BmB,KAAM,W,EASVX,SAAA,YAC2B,IAArBjF,KAAKgF,cACPhF,KAAKU,OACLV,KAAK0E,Y,EASTS,SAAA,YAC2B,IAArBnF,KAAKkF,cACPlF,KAAKU,OACLV,KAAK0E,Y,EAUTc,aAAA,SAAaK,GASX,MARA,GAAGC,KAAKC,MAAM/F,KAAKwE,MAAOqB,GAE1B7F,KAAK6B,SAAU,EAEf7B,KAAKgF,cAAgBa,EAAQG,QAAQC,MAAMnB,KAC3C9E,KAAKkF,cAAgBW,EAAQG,QAAQC,MAAMlB,KAE3CvC,EAAEC,SACKoD,G,EAtJUtB,CAAkBD,KCLlB4B,EAAAA,SAAAA,G,4EACnB9G,QAAA,WACE,OACE,SAAK6B,UAAU,aACb,SAAKA,UAAU,oBACb,SAAKA,UAAU,aACZW,IAAAA,UACC,CACEX,UAAW,yBACXb,KAAM,cACN2B,QAAS,kBAAMzB,IAAIkD,MAAMC,KAAKlD,KAEhCD,IAAIY,WAAWC,MAAM,0CAI3B,SAAKF,UAAU,kBACb,SAAKA,UAAU,aAAasD,EAAUc,gB,EAjB3Ba,CAAkBC,KCNvC,MAAM,EAA+BvH,OAAOC,KAAKC,OAAO,iBCAlD,EAA+BF,OAAOC,KAAKC,OAAO,+B,aCIxDwB,IAAI8F,aAAanG,IAAI,aAAa,SAACK,GACjCA,EAAIM,MAAMyF,OAAO7B,MAAQzF,EAEzBuB,EAAIgG,cAAJ,IACO,aACJC,aAAaL,GACbM,mBACC,CACEpG,KAAM,kBACNC,MAAOC,EAAIY,WAAWC,MAAM,0CAC5BsF,WAAY,4BAEd,SCZJC,EAAAA,EAAAA,QAAOC,IAAAA,UAAsB,iBAAiB,SAAC7G,GAC7CA,EAAMG,IAAI,YAAa,CACrB2G,KAAM,cACNvG,MAAO,iC","sources":["webpack://@fof/pages/webpack/bootstrap","webpack://@fof/pages/webpack/runtime/compat get default export","webpack://@fof/pages/webpack/runtime/define property getters","webpack://@fof/pages/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/pages/webpack/runtime/make namespace object","webpack://@fof/pages/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/pages/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/pages/external root \"flarum.core.compat['app']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/utils/computed']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/utils/string']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/components/Badge']\"","webpack://@fof/pages/./src/common/models/Page.js","webpack://@fof/pages/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/utils/withAttr']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/utils/setRouteWithForcedRefresh']\"","webpack://@fof/pages/./src/admin/components/EditPageModal.js","webpack://@fof/pages/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/components/Placeholder']\"","webpack://@fof/pages/external root \"flarum.core.compat['admin/utils/saveSettings']\"","webpack://@fof/pages/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@fof/pages/./src/admin/components/PagesListItem.js","webpack://@fof/pages/./src/admin/components/PagesList.js","webpack://@fof/pages/./src/admin/components/PagesPage.js","webpack://@fof/pages/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/pages/external root \"flarum.core.compat['admin/components/BasicsPage']\"","webpack://@fof/pages/./src/admin/index.js","webpack://@fof/pages/./src/admin/addPageHomePageOption.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/computed'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/string'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Badge'];","import app from 'flarum/app';\nimport Model from 'flarum/common/Model';\nimport computed from 'flarum/common/utils/computed';\nimport { getPlainContent } from 'flarum/common/utils/string';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Badge from 'flarum/common/components/Badge';\n\nexport default class Page extends Model {\n  title = Model.attribute('title');\n  time = Model.attribute('time', Model.transformDate);\n  editTime = Model.attribute('editTime', Model.transformDate);\n  content = Model.attribute('content');\n  contentHtml = Model.attribute('contentHtml');\n  contentPlain = computed('contentHtml', getPlainContent);\n  slug = Model.attribute('slug');\n  isHidden = Model.attribute('isHidden');\n  isRestricted = Model.attribute('isRestricted');\n  isHtml = Model.attribute('isHtml');\n\n  badges() {\n    const items = new ItemList();\n\n    if (this.isHidden()) {\n      items.add(\n        'hidden',\n        Badge.component({\n          type: 'hidden',\n          icon: 'fas fa-trash',\n          label: app.translator.trans('fof-pages.admin.badges.hidden'),\n        })\n      );\n    }\n\n    if (this.isRestricted()) {\n      items.add(\n        'restricted',\n        Badge.component({\n          type: 'restricted',\n          icon: 'fas fa-user-shield',\n          label: app.translator.trans('fof-pages.admin.badges.restricted'),\n        })\n      );\n    }\n\n    return items;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/withAttr'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/setRouteWithForcedRefresh'];","import Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport { slug } from 'flarum/common/utils/string';\nimport Stream from 'flarum/common/utils/Stream';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport setRouteWithForcedRefresh from 'flarum/common/utils/setRouteWithForcedRefresh';\n\n/**\n * The `EditPageModal` component shows a modal dialog which allows the user\n * to create or edit a page.\n */\nexport default class EditPageModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.page = this.attrs.page || app.store.createRecord('pages');\n\n    this.pageTitle = Stream(this.page.title() || '');\n    this.slug = Stream(this.page.slug() || '');\n    this.pageContent = Stream(this.page.content() || '');\n    this.isHidden = Stream(this.page.isHidden());\n    this.isRestricted = Stream(this.page.isRestricted());\n    this.isHtml = Stream(this.page.isHtml());\n  }\n\n  className() {\n    return 'EditPageModal Modal--large';\n  }\n\n  title() {\n    const title = this.pageTitle();\n    return title ? title : app.translator.trans('fof-pages.admin.edit_page.title');\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form\">\n          <div className=\"Form-group\">\n            <label>{app.translator.trans('fof-pages.admin.edit_page.title_label')}</label>\n            <input\n              className=\"FormControl\"\n              placeholder={app.translator.trans('fof-pages.admin.edit_page.title_placeholder')}\n              value={this.pageTitle()}\n              oninput={(e) => {\n                this.pageTitle(e.target.value);\n                this.slug(slug(e.target.value));\n              }}\n            />\n          </div>\n\n          <div className=\"Form-group\">\n            <label>{app.translator.trans('fof-pages.admin.edit_page.slug_label')}</label>\n            <input\n              className=\"FormControl\"\n              placeholder={app.translator.trans('fof-pages.admin.edit_page.slug_placeholder')}\n              value={this.slug()}\n              oninput={(e) => {\n                this.slug(e.target.value);\n              }}\n            />\n          </div>\n\n          <div className=\"Form-group\">\n            <label>{app.translator.trans('fof-pages.admin.edit_page.content_label')}</label>\n            <textarea\n              className=\"FormControl\"\n              rows=\"5\"\n              value={this.pageContent()}\n              onchange={withAttr('value', this.pageContent)}\n              placeholder={app.translator.trans('fof-pages.admin.edit_page.content_placeholder')}\n            />\n          </div>\n\n          <div className=\"Form-group\">\n            <div>\n              <label className=\"checkbox\">\n                <input type=\"checkbox\" checked={this.isHidden()} onchange={withAttr('checked', this.isHidden)} />\n                {app.translator.trans('fof-pages.admin.edit_page.hidden_label')}\n              </label>\n            </div>\n          </div>\n\n          <div className=\"Form-group\">\n            <div>\n              <label className=\"checkbox\">\n                <input type=\"checkbox\" checked={this.isRestricted()} onchange={withAttr('checked', this.isRestricted)} />\n                {app.translator.trans('fof-pages.admin.edit_page.restricted_label')}\n              </label>\n            </div>\n          </div>\n\n          <div className=\"Form-group\">\n            <div>\n              <label className=\"checkbox\">\n                <input type=\"checkbox\" checked={this.isHtml()} onchange={withAttr('checked', this.isHtml)} />\n                {app.translator.trans('fof-pages.admin.edit_page.html_label')}\n              </label>\n            </div>\n          </div>\n\n          <div className=\"Form-group\">\n            {Button.component(\n              {\n                type: 'submit',\n                className: 'Button Button--primary EditPageModal-save',\n                loading: this.loading,\n              },\n              app.translator.trans('fof-pages.admin.edit_page.submit_button')\n            )}\n            {this.page.exists ? (\n              <button type=\"button\" className=\"Button EditPageModal-delete\" onclick={this.delete.bind(this)}>\n                {app.translator.trans('fof-pages.admin.edit_page.delete_page_button')}\n              </button>\n            ) : (\n              ''\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    this.loading = true;\n\n    this.page\n      .save(\n        {\n          title: this.pageTitle(),\n          slug: this.slug(),\n          content: this.pageContent(),\n          isHidden: this.isHidden(),\n          isRestricted: this.isRestricted(),\n          isHtml: this.isHtml(),\n        },\n        { errorHandler: this.onerror.bind(this) }\n      )\n      .then(this.hideAndRefresh.bind(this))\n      .catch(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n\n  hideAndRefresh() {\n    this.hide();\n    setRouteWithForcedRefresh(app.route('extension', { id: 'fof-pages' }));\n  }\n\n  delete() {\n    this.loading = true;\n\n    if (confirm(app.translator.trans('fof-pages.admin.edit_page.delete_page_confirmation'))) {\n      this.page\n        .delete()\n        .then(this.hideAndRefresh.bind(this))\n        .catch(() => {\n          this.loading = false;\n          m.redraw();\n        });\n    }\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Placeholder'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/utils/saveSettings'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","import Button from 'flarum/common/components/Button';\nimport Component from 'flarum/common/Component';\nimport saveSettings from 'flarum/admin/utils/saveSettings';\nimport listItems from 'flarum/common/helpers/listItems';\nimport setRouteWithForcedRefresh from 'flarum/common/utils/setRouteWithForcedRefresh';\n\nimport EditPageModal from './EditPageModal';\n\n/**\n * ### Props\n *\n * - `page`\n */\nexport default class PagesListItem extends Component {\n  view() {\n    const page = this.attrs.page;\n    const url = app.forum.attribute('baseUrl') + '/p/' + page.id() + '-' + page.slug();\n    const badges = page.badges().toArray();\n    return (\n      <tr key={page.id()}>\n        <th>\n          {page.title()}\n          {badges.length ? <ul className=\"badges\">{listItems(page.badges().toArray())}</ul> : null}\n        </th>\n        <td className=\"Pages-actions\">\n          <div className=\"ButtonGroup\">\n            {Button.component({\n              className: 'Button Button--page-edit',\n              icon: 'fas fa-pencil-alt',\n              onclick: () => app.modal.show(EditPageModal, { page }),\n            })}\n            {Button.component({\n              className: 'Button Button--page-edit',\n              icon: 'fas fa-home',\n              onclick: this.setAsHomePage.bind(this),\n              disabled: app.data.settings['pages_home'] === page.id() && app.data.settings['default_route'] === '/pages/home',\n            })}\n            {Button.component({\n              className: 'Button Button--page-view',\n              icon: 'fas fa-eye fa-sm',\n              onclick: () => window.open(url, '_blank'),\n            })}\n            {Button.component({\n              className: 'Button Button--danger Button--page-delete',\n              icon: 'fas fa-times',\n              onclick: this.delete.bind(this),\n            })}\n          </div>\n        </td>\n      </tr>\n    );\n  }\n\n  setAsHomePage() {\n    app.alerts.dismiss(this.successAlert);\n    if (confirm(app.translator.trans('fof-pages.admin.edit_page.set_as_home_page_confirmation'))) {\n      const page = this.attrs.page;\n      saveSettings({\n        default_route: '/pages/home',\n        pages_home: page.id(),\n      })\n        .then(() => {\n          app.alerts.show({ type: 'success' }, app.translator.trans('fof-pages.admin.edit_page.set_as_home_page_done'));\n        })\n        .catch(() => {})\n        .then(() => {\n          this.loading = false;\n          m.redraw();\n        });\n    }\n  }\n\n  delete() {\n    if (confirm(app.translator.trans('fof-pages.admin.edit_page.delete_page_confirmation'))) {\n      const page = this.attrs.page;\n      page.delete().then(() => {\n        setRouteWithForcedRefresh(app.route('extension', { id: 'fof-pages' }));\n      });\n    }\n  }\n}\n","import Component from 'flarum/common/Component';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Placeholder from 'flarum/common/components/Placeholder';\nimport Button from 'flarum/common/components/Button';\n\nimport PagesListItem from './PagesListItem';\n\n/**\n * The `PagesList` component displays a list of Pages.\n *\n */\nexport default class PagesList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    /**\n     * Whether or not pages results are loading.\n     *\n     * @type {Boolean}\n     */\n    this.loading = true;\n\n    /**\n     * The pages in the pages list.\n     *\n     * @type {Page}\n     */\n    this.pages = [];\n\n    /**\n     * Current page number.\n     *\n     * @type {Integer}\n     */\n    this.page = 0;\n\n    /**\n     * The number of activity items to load per request.\n     *\n     * @type {Integer}\n     */\n    this.loadLimit = 20;\n\n    this.refresh();\n  }\n\n  view() {\n    if (this.loading) {\n      return <div className=\"PageList-loading\">{LoadingIndicator.component()}</div>;\n    }\n\n    if (this.pages.length === 0) {\n      const text = app.translator.trans('fof-pages.admin.pages_list.empty_text');\n      return Placeholder.component({ text });\n    }\n\n    let next, prev;\n\n    if (this.nextResults === true) {\n      next = Button.component({\n        className: 'Button Button--PageList-next',\n        icon: 'fas fa-angle-right',\n        onclick: this.loadNext.bind(this),\n      });\n    }\n\n    if (this.prevResults === true) {\n      prev = Button.component({\n        className: 'Button Button--PageList-prev',\n        icon: 'fas fa-angle-left',\n        onclick: this.loadPrev.bind(this),\n      });\n    }\n\n    return (\n      <div className=\"PageList\">\n        <table className=\"PageList-results\">\n          <thead>\n            <tr>\n              <th>{app.translator.trans('fof-pages.admin.pages_list.title')}</th>\n              <th />\n            </tr>\n          </thead>\n          <tbody>\n            {this.pages.map((page) => {\n              return PagesListItem.component({ page });\n            })}\n          </tbody>\n        </table>\n        <div className=\"PageList-pagination\">\n          {next}\n          {prev}\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * @public\n   */\n  refresh(clear = true) {\n    if (clear) {\n      this.loading = true;\n      this.pages = [];\n    }\n\n    return this.loadResults().then(this.parseResults.bind(this));\n  }\n\n  /**\n   * Load a new page of Pages results.\n   *\n   * @param {Integer} page number.\n   * @return {Promise}\n   */\n  loadResults() {\n    const offset = this.page * this.loadLimit;\n    return app.store.find('pages', {\n      page: { offset, limit: this.loadLimit },\n      sort: '-time',\n    });\n  }\n\n  /**\n   * Load the next page of results.\n   *\n   * @public\n   */\n  loadNext() {\n    if (this.nextResults === true) {\n      this.page++;\n      this.refresh();\n    }\n  }\n\n  /**\n   * Load the previous page of results.\n   *\n   * @public\n   */\n  loadPrev() {\n    if (this.prevResults === true) {\n      this.page--;\n      this.refresh();\n    }\n  }\n\n  /**\n   * Parse results and append them to the page list.\n   *\n   * @param {Page[]} results\n   * @return {Page[]}\n   */\n  parseResults(results) {\n    [].push.apply(this.pages, results);\n\n    this.loading = false;\n\n    this.nextResults = !!results.payload.links.next;\n    this.prevResults = !!results.payload.links.prev;\n\n    m.redraw();\n    return results;\n  }\n}\n","import ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport Button from 'flarum/common/components/Button';\n\nimport EditPageModal from './EditPageModal';\nimport PagesList from './PagesList';\n\nexport default class PagesPage extends ExtensionPage {\n  content() {\n    return (\n      <div className=\"PagesPage\">\n        <div className=\"PagesPage-header\">\n          <div className=\"container\">\n            {Button.component(\n              {\n                className: 'Button Button--primary',\n                icon: 'fas fa-plus',\n                onclick: () => app.modal.show(EditPageModal),\n              },\n              app.translator.trans('fof-pages.admin.pages.create_button')\n            )}\n          </div>\n        </div>\n        <div className=\"PagesPage-list\">\n          <div className=\"container\">{PagesList.component()}</div>\n        </div>\n      </div>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/BasicsPage'];","import Page from '../common/models/Page';\nimport PagesPage from './components/PagesPage';\nimport addPageHomePageOption from './addPageHomePageOption';\n\napp.initializers.add('fof-pages', (app) => {\n  app.store.models.pages = Page;\n\n  app.extensionData\n    .for('fof-pages')\n    .registerPage(PagesPage)\n    .registerPermission(\n      {\n        icon: 'fas fa-file-alt',\n        label: app.translator.trans('fof-pages.admin.permissions.restricted'),\n        permission: 'fof-pages.viewRestricted',\n      },\n      'view'\n    );\n\n  addPageHomePageOption();\n});\n","import { extend } from 'flarum/common/extend';\nimport BasicsPage from 'flarum/admin/components/BasicsPage';\n\nexport default function () {\n  extend(BasicsPage.prototype, 'homePageItems', (items) => {\n    items.add('fof-pages', {\n      path: '/pages/home',\n      label: 'FriendsOfFlarum Pages',\n    });\n  });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","_setPrototypeOf","p","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","create","constructor","flarum","core","compat","Page","title","Model","time","editTime","content","contentHtml","contentPlain","computed","getPlainContent","slug","isHidden","isRestricted","isHtml","badges","items","ItemList","this","add","Badge","type","icon","label","app","EditPageModal","oninit","vnode","page","attrs","store","createRecord","pageTitle","Stream","pageContent","className","translator","trans","placeholder","oninput","e","target","rows","onchange","withAttr","checked","Button","loading","exists","onclick","bind","onsubmit","preventDefault","save","errorHandler","onerror","then","hideAndRefresh","m","redraw","hide","setRouteWithForcedRefresh","route","id","confirm","Modal","PagesListItem","view","url","forum","attribute","toArray","length","listItems","modal","show","setAsHomePage","disabled","data","settings","window","open","alerts","dismiss","successAlert","saveSettings","default_route","pages_home","Component","PagesList","pages","loadLimit","refresh","LoadingIndicator","text","Placeholder","next","prev","nextResults","loadNext","prevResults","loadPrev","map","component","clear","loadResults","parseResults","offset","find","limit","sort","results","push","apply","payload","links","PagesPage","ExtensionPage","initializers","models","extensionData","registerPage","registerPermission","permission","extend","BasicsPage","path"],"sourceRoot":""}